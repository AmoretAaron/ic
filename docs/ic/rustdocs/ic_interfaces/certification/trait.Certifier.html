<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `Certifier` trait in crate `ic_interfaces`."><meta name="keywords" content="rust, rustlang, rust-lang, Certifier"><title>ic_interfaces::certification::Certifier - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css"><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="shortcut icon" href="../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc trait"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../ic_interfaces/index.html'><div class='logo-container'><img src='../../rust-logo.png' alt='logo'></div></a><p class='location'>Trait Certifier</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#required-methods">Required Methods</a><div class="sidebar-links"><a href="#tymethod.on_state_change">on_state_change</a></div><a class="sidebar-title" href="#implementors">Implementors</a></div><p class='location'><a href='../index.html'>ic_interfaces</a>::<wbr><a href='index.html'>certification</a></p><script>window.sidebarCurrent = {name: 'Certifier', ty: 'trait', relpath: ''};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../src/ic_interfaces/certification.rs.html#44-51' title='goto source code'>[src]</a></span><span class='in-band'>Trait <a href='../index.html'>ic_interfaces</a>::<wbr><a href='index.html'>certification</a>::<wbr><a class="trait" href=''>Certifier</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><pre class='rust trait'>pub trait Certifier: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> {
    fn <a href='#tymethod.on_state_change' class='fnname'>on_state_change</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;consensus_cache: &amp;dyn <a class="trait" href="../../ic_interfaces/consensus_pool/trait.ConsensusPoolCache.html" title="trait ic_interfaces::consensus_pool::ConsensusPoolCache">ConsensusPoolCache</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;certification_pool: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/std/sync/rwlock/struct.RwLock.html" title="struct std::sync::rwlock::RwLock">RwLock</a>&lt;dyn <a class="trait" href="../../ic_interfaces/certification/trait.CertificationPool.html" title="trait ic_interfaces::certification::CertificationPool">CertificationPool</a>&gt;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="type" href="../../ic_interfaces/certification/type.ChangeSet.html" title="type ic_interfaces::certification::ChangeSet">ChangeSet</a>;
}</pre></div><div class='docblock'><p>The certifier component is responsible for signing execution states.
These signatures are required, to securely transmit a set of inter-canister
messages from one sub-network to another, or to synchronize the replica
state.</p>
<p>For creating a signature for a state, every replica follows the
following algorithm:</p>
<ol>
<li>
<p>Request a set of (height, hash) tuples from its local StateManager, where
<code>hash</code> is the hash of the replicated state after processing the batch at the
specified height. The StateManager is responsible for selecting which parts
of the replicated state are included in the computation of the hash.</p>
</li>
<li>
<p>Sign the hash-height tuple, resulting in a CertificationShare, and place
the CertificationShare in the certification pool, to be gossiped to other
replicas.</p>
</li>
<li>
<p>On every invocation of <code>on_state_change</code>, if sufficiently many
CertificationShares for the same (height, hash) pair were received, combine
them into a full Certification and put it into the certification pool. At
that point, the CertificationShares are not required anymore and can be
purged.</p>
</li>
<li>
<p>For every (height, hash) pair with a full Certification, submit
the pair (height, Certification) to the StateManager.</p>
</li>
<li>
<p>Whenever the catch-up package height increases, remove all certification
artifacts below this height.</p>
</li>
</ol>
</div>
            <h2 id='required-methods' class='small-section-header'>Required methods<a href='#required-methods' class='anchor'></a></h2><div class='methods'><h3 id='tymethod.on_state_change' class='method'><code id='on_state_change.v'>fn <a href='#tymethod.on_state_change' class='fnname'>on_state_change</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;consensus_cache: &amp;dyn <a class="trait" href="../../ic_interfaces/consensus_pool/trait.ConsensusPoolCache.html" title="trait ic_interfaces::consensus_pool::ConsensusPoolCache">ConsensusPoolCache</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;certification_pool: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/std/sync/rwlock/struct.RwLock.html" title="struct std::sync::rwlock::RwLock">RwLock</a>&lt;dyn <a class="trait" href="../../ic_interfaces/certification/trait.CertificationPool.html" title="trait ic_interfaces::certification::CertificationPool">CertificationPool</a>&gt;&gt;<br>) -&gt; <a class="type" href="../../ic_interfaces/certification/type.ChangeSet.html" title="type ic_interfaces::certification::ChangeSet">ChangeSet</a></code></h3><div class='docblock'><p>Should be called on every change of the certification pool and timeouts.</p>
</div></div><span class='loading-content'>Loading content...</span>
            <h2 id='implementors' class='small-section-header'>Implementors<a href='#implementors' class='anchor'></a></h2><div class='item-list' id='implementors-list'></div><span class='loading-content'>Loading content...</span><script type="text/javascript" src="../../implementors/ic_interfaces/certification/trait.Certifier.js" async></script></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../";window.currentCrate = "ic_interfaces";</script><script src="../../main.js"></script><script defer src="../../search-index.js"></script></body></html>