<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `ArtifactClient` trait in crate `ic_interfaces`."><meta name="keywords" content="rust, rustlang, rust-lang, ArtifactClient"><title>ic_interfaces::artifact_manager::ArtifactClient - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css"><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="shortcut icon" href="../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc trait"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../ic_interfaces/index.html'><div class='logo-container'><img src='../../rust-logo.png' alt='logo'></div></a><p class='location'>Trait ArtifactClient</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#required-methods">Required Methods</a><div class="sidebar-links"><a href="#tymethod.check_artifact_acceptance">check_artifact_acceptance</a><a href="#tymethod.get_chunk_tracker">get_chunk_tracker</a><a href="#tymethod.get_priority_function">get_priority_function</a><a href="#tymethod.get_validated_by_identifier">get_validated_by_identifier</a><a href="#tymethod.has_artifact">has_artifact</a></div><a class="sidebar-title" href="#provided-methods">Provided Methods</a><div class="sidebar-links"><a href="#method.get_all_validated_by_filter">get_all_validated_by_filter</a><a href="#method.get_filter">get_filter</a><a href="#method.get_remaining_quota">get_remaining_quota</a></div><a class="sidebar-title" href="#implementors">Implementors</a></div><p class='location'><a href='../index.html'>ic_interfaces</a>::<wbr><a href='index.html'>artifact_manager</a></p><script>window.sidebarCurrent = {name: 'ArtifactClient', ty: 'trait', relpath: ''};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../src/ic_interfaces/artifact_manager.rs.html#45-140' title='goto source code'>[src]</a></span><span class='in-band'>Trait <a href='../index.html'>ic_interfaces</a>::<wbr><a href='index.html'>artifact_manager</a>::<wbr><a class="trait" href=''>ArtifactClient</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><pre class='rust trait'>pub trait ArtifactClient&lt;Artifact:&nbsp;<a class="trait" href="../../ic_types/artifact/trait.ArtifactKind.html" title="trait ic_types::artifact::ArtifactKind">ArtifactKind</a>&gt;: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> {
    fn <a href='#tymethod.check_artifact_acceptance' class='fnname'>check_artifact_acceptance</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg: Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.SerializeAs" title="type ic_types::artifact::ArtifactKind::SerializeAs">SerializeAs</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;peer_id: &amp;<a class="type" href="../../ic_base_types/type.NodeId.html" title="type ic_base_types::NodeId">NodeId</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="../../ic_interfaces/artifact_manager/enum.ArtifactAcceptance.html" title="enum ic_interfaces::artifact_manager::ArtifactAcceptance">ArtifactAcceptance</a>&lt;Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Message" title="type ic_types::artifact::ArtifactKind::Message">Message</a>&gt;, <a class="enum" href="../../ic_interfaces/artifact_pool/enum.ArtifactPoolError.html" title="enum ic_interfaces::artifact_pool::ArtifactPoolError">ArtifactPoolError</a>&gt;;
<div class='item-spacer'></div>    fn <a href='#tymethod.has_artifact' class='fnname'>has_artifact</a>(&amp;self, msg_id: &amp;Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Id" title="type ic_types::artifact::ArtifactKind::Id">Id</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>;
<div class='item-spacer'></div>    fn <a href='#tymethod.get_validated_by_identifier' class='fnname'>get_validated_by_identifier</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg_id: &amp;Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Id" title="type ic_types::artifact::ArtifactKind::Id">Id</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Message" title="type ic_types::artifact::ArtifactKind::Message">Message</a>&gt;;
<div class='item-spacer'></div>    fn <a href='#tymethod.get_priority_function' class='fnname'>get_priority_function</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../ic_types/artifact/type.PriorityFn.html" title="type ic_types::artifact::PriorityFn">PriorityFn</a>&lt;Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Id" title="type ic_types::artifact::ArtifactKind::Id">Id</a>, Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Attribute" title="type ic_types::artifact::ArtifactKind::Attribute">Attribute</a>&gt;&gt;;
<div class='item-spacer'></div>    fn <a href='#tymethod.get_chunk_tracker' class='fnname'>get_chunk_tracker</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;artifact_id: &amp;Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Id" title="type ic_types::artifact::ArtifactKind::Id">Id</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../ic_types/chunkable/trait.Chunkable.html" title="trait ic_types::chunkable::Chunkable">Chunkable</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>&gt;;

    fn <a href='#method.get_filter' class='fnname'>get_filter</a>(&amp;self) -&gt; Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Filter" title="type ic_types::artifact::ArtifactKind::Filter">Filter</a><br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Filter" title="type ic_types::artifact::ArtifactKind::Filter">Filter</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a></span>,
    { ... }
<div class='item-spacer'></div>    fn <a href='#method.get_all_validated_by_filter' class='fnname'>get_all_validated_by_filter</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_filter: &amp;Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Filter" title="type ic_types::artifact::ArtifactKind::Filter">Filter</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../../ic_types/artifact/struct.Advert.html" title="struct ic_types::artifact::Advert">Advert</a>&lt;Artifact&gt;&gt; { ... }
<div class='item-spacer'></div>    fn <a href='#method.get_remaining_quota' class='fnname'>get_remaining_quota</a>(&amp;self, _peer_id: <a class="type" href="../../ic_base_types/type.NodeId.html" title="type ic_base_types::NodeId">NodeId</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a> { ... }
}</pre></div><div class='docblock'><p>An abstraction of artifact processing for a sub-type of the overall
'Artifact' type.</p>
</div>
            <h2 id='required-methods' class='small-section-header'>Required methods<a href='#required-methods' class='anchor'></a></h2><div class='methods'><h3 id='tymethod.check_artifact_acceptance' class='method'><code id='check_artifact_acceptance.v'>fn <a href='#tymethod.check_artifact_acceptance' class='fnname'>check_artifact_acceptance</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;msg: Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.SerializeAs" title="type ic_types::artifact::ArtifactKind::SerializeAs">SerializeAs</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;peer_id: &amp;<a class="type" href="../../ic_base_types/type.NodeId.html" title="type ic_base_types::NodeId">NodeId</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="../../ic_interfaces/artifact_manager/enum.ArtifactAcceptance.html" title="enum ic_interfaces::artifact_manager::ArtifactAcceptance">ArtifactAcceptance</a>&lt;Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Message" title="type ic_types::artifact::ArtifactKind::Message">Message</a>&gt;, <a class="enum" href="../../ic_interfaces/artifact_pool/enum.ArtifactPoolError.html" title="enum ic_interfaces::artifact_pool::ArtifactPoolError">ArtifactPoolError</a>&gt;</code></h3><div class='docblock'><p>When a new artifact is received, <code>check_artifact_acceptance</code> function is
called to perform basic pre-processing and check if the artifact matches
the advert used to request it if one is passed along.
Note that this function should not modify the artifact pool.</p>
<p>If it passes the pre-processing, the same artifact should be
returned, which will then be passed on to the corresponding
'ArtifactProcessor' component afterwards. Otherwise it will be rejected.</p>
<p>The default implementation is to accept unconditionally.</p>
</div><h3 id='tymethod.has_artifact' class='method'><code id='has_artifact.v'>fn <a href='#tymethod.has_artifact' class='fnname'>has_artifact</a>(&amp;self, msg_id: &amp;Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Id" title="type ic_types::artifact::ArtifactKind::Id">Id</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code></h3><div class='docblock'><p>Checks if the node already has the artifact in the pool by its
identifier.</p>
</div><h3 id='tymethod.get_validated_by_identifier' class='method'><code id='get_validated_by_identifier.v'>fn <a href='#tymethod.get_validated_by_identifier' class='fnname'>get_validated_by_identifier</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;msg_id: &amp;Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Id" title="type ic_types::artifact::ArtifactKind::Id">Id</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Message" title="type ic_types::artifact::ArtifactKind::Message">Message</a>&gt;</code></h3><div class='docblock'><p>Gets a validated artifact by its identifier. Return <code>None</code>
if no valid artifact is found for the given identifier.</p>
</div><h3 id='tymethod.get_priority_function' class='method'><code id='get_priority_function.v'>fn <a href='#tymethod.get_priority_function' class='fnname'>get_priority_function</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../ic_types/artifact/type.PriorityFn.html" title="type ic_types::artifact::PriorityFn">PriorityFn</a>&lt;Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Id" title="type ic_types::artifact::ArtifactKind::Id">Id</a>, Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Attribute" title="type ic_types::artifact::ArtifactKind::Attribute">Attribute</a>&gt;&gt;</code></h3><div class='docblock'><p>Return the priority function used by this client.</p>
</div><h3 id='tymethod.get_chunk_tracker' class='method'><code id='get_chunk_tracker.v'>fn <a href='#tymethod.get_chunk_tracker' class='fnname'>get_chunk_tracker</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;artifact_id: &amp;Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Id" title="type ic_types::artifact::ArtifactKind::Id">Id</a><br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../ic_types/chunkable/trait.Chunkable.html" title="trait ic_types::chunkable::Chunkable">Chunkable</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>&gt;</code></h3><div class='docblock'><p>Get Chunk tracker for an advert.  Download/Chunk trackers for
Semi-structured/multi-chunk artifacts need to be operated by
pool clients.  Clients own the tracking logic, this callback
is for them to setup chunk iterator context etc. For example
This call may be used by an artifact with on-disk chunks to
setup the directory and iterator logic before gossip starts
calling into the iterator.</p>
</div></div><span class='loading-content'>Loading content...</span>
            <h2 id='provided-methods' class='small-section-header'>Provided methods<a href='#provided-methods' class='anchor'></a></h2><div class='methods'><h3 id='method.get_filter' class='method'><code id='get_filter.v'>fn <a href='#method.get_filter' class='fnname'>get_filter</a>(&amp;self) -&gt; Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Filter" title="type ic_types::artifact::ArtifactKind::Filter">Filter</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Filter" title="type ic_types::artifact::ArtifactKind::Filter">Filter</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a>,&nbsp;</span></code></h3><div class='docblock'><p>Gets the filter that needs to be sent with re-transmission request to
other peers. This filter contains the information to indicate to
other peers what this peer already has, and what relevant adverts
are still needed.</p>
<p>Assuming that Node A is a node trying to resume with the help of Node B.
get_filter will be used by Node A to figure out its current filter and
will be sent to Node B as a part of the re-transmission request.
Node B will then use get_all_validated_by_filter with that filter to
derive only the relevant adverts to be sent back to Node A.</p>
<p>In the first version to be implemented, this filter is the last
finalized height of Consensus. For all pool handlers this can be
used to derive a suitable threshold value. For Consensus it will be
height, for Ingress messages the time stamp of the finalized block at
this height, for DKG the DKG instance relevant at this height, for
Certification and State Synchronization the latest available
executed state referred to in the block at this height.</p>
<p><code>Example</code>
If Consensus pool has delivered batches up to height 10, the filter will
be 'height = 10' since this node only needs consensus artifacts
with height &gt; 10.</p>
</div><h3 id='method.get_all_validated_by_filter' class='method'><code id='get_all_validated_by_filter.v'>fn <a href='#method.get_all_validated_by_filter' class='fnname'>get_all_validated_by_filter</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;_filter: &amp;Artifact::<a class="type" href="../../ic_types/artifact/trait.ArtifactKind.html#associatedtype.Filter" title="type ic_types::artifact::ArtifactKind::Filter">Filter</a><br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../../ic_types/artifact/struct.Advert.html" title="struct ic_types::artifact::Advert">Advert</a>&lt;Artifact&gt;&gt;</code></h3><div class='docblock'><p>Get adverts of all validated artifacts by the filter. This filter is
used to derive only the relevant adverts.</p>
<p>Assuming that Node A is a node trying to resume with the help of Node B.
get_filter will be used by Node A to figure out its current filter and
will be sent to Node B as a part of the re-transmission request.
Node B will then use get_all_validated_by_filter with that filter to
derive only the relevant adverts to be sent back to Node A.</p>
<p><code>Example</code>
If the filter contains height = 10; adverts for all the validated
artifacts with height &gt; 10 will be returned by this function.</p>
</div><h3 id='method.get_remaining_quota' class='method'><code id='get_remaining_quota.v'>fn <a href='#method.get_remaining_quota' class='fnname'>get_remaining_quota</a>(&amp;self, _peer_id: <a class="type" href="../../ic_base_types/type.NodeId.html" title="type ic_base_types::NodeId">NodeId</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></code></h3><div class='docblock'><p>Return the remaining quota that this peer is allowed to consume.
Return <code>None</code> if the quota is not specified.</p>
</div></div><span class='loading-content'>Loading content...</span>
            <h2 id='implementors' class='small-section-header'>Implementors<a href='#implementors' class='anchor'></a></h2><div class='item-list' id='implementors-list'></div><span class='loading-content'>Loading content...</span><script type="text/javascript" src="../../implementors/ic_interfaces/artifact_manager/trait.ArtifactClient.js" async></script></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../";window.currentCrate = "ic_interfaces";</script><script src="../../main.js"></script><script defer src="../../search-index.js"></script></body></html>